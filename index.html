<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dika ID - Solusi Digital Cepat & Aman</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-color: #fff;
  --text-color: #000;
  --accent-color: #007BFF;
  --card-bg: #f9f9f9;
  --popup-bg: #fff;
}
body {
  margin: 0;
  font-family: 'Poppins', sans-serif;
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s, color 0.3s;
}
header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  background: var(--accent-color);
  color: white;
  box-shadow: 0 2px 10px rgba(0,0,0,0.2);
}
.theme-toggle {
  cursor: pointer;
  font-size: 1.5rem;
  transition: transform 0.3s;
}
.theme-toggle:hover {
  transform: scale(1.2);
}
.container {
  padding: 2rem;
  max-width: 1000px;
  margin: auto;
}
.section {
  margin-top: 3rem;
  border-top: 2px solid #ddd;
  padding-top: 2rem;
}
.profile {
  background: var(--card-bg);
  padding: 1.5rem;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-width: 900px;
  margin: 2rem auto;
  overflow: hidden;
}

.profile-header {
  text-align: center;
  margin-bottom: 1rem;
}

.profile-header h2 {
  margin: 0;
  font-size: 1.5rem;
}

.profile-header p {
  margin: 0.3rem 0 0 0;
  font-weight: 600;
  font-size: 0.95rem;
}

.profile-content {
  display: flex;
  gap: 1.5rem;
  align-items: center;
  justify-content: center;
  flex-wrap: nowrap;
  flex-direction: row;
}

.profile-content img {
  width: 110px;
  height: 110px;
  border-radius: 8px;
  object-fit: cover;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  flex-shrink: 0;
}

.profile .bio {
  flex: 1;
  text-align: left;
  font-size: 0.9rem;
  line-height: 1.4;
}

.profile .bio p {
  margin: 0.3rem 0;
  word-wrap: break-word;
}

@media (max-width: 500px) {
  .profile-content {
    flex-direction: column;
    align-items: center;
    text-align: center;
  }

  .profile-content img {
    width: 140px;
    height: 140px;
  }

  .profile .bio {
    font-size: 0.9rem;
  }
}
.label-sering {
  background: orange;
  color: white;
  font-size: 0.7rem;
  font-weight: bold;
  padding: 0.2rem 0.5rem;
  border-radius: 4px;
  position: absolute;
  top: 10px;
  left: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}
.faq h2, .products h2, .payment-section h2 {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  color: var(--accent-color);
}
.products .product-list {
  scroll-behavior: smooth;
  display: flex;
  gap: 1rem;
  overflow-x: auto;
  padding-bottom: 1rem;
  scroll-snap-type: x mandatory;
}
.product-list {
  scroll-snap-type: x mandatory;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch; /* Untuk iOS */
}
.products .product {
  position: relative;
  min-width: 200px;
  flex-shrink: 0;
  scroll-snap-align: start;
  border: 1px solid #ccc;
  border-radius: 10px;
  padding: 1rem;
  background: var(--card-bg);
  transition: transform 0.3s, box-shadow 0.3s;
  text-align: center;
}
.products .product:hover {
  transform: translateY(-5px) scale(1.02);
  box-shadow: 0 4px 15px rgba(0,0,0,0.15);
}
.products img {
  width: 80px;
  margin-bottom: 1rem;
  transition: transform 0.3s;
}
.products img:hover {
  transform: scale(1.1);
}
.price {
  font-weight: bold;
  color: #28a745;
}
.price span {
  font-size: 1rem;
}
button {
  background: var(--accent-color);
  color: white;
  border: none;
  padding: 0.7rem 1.2rem;
  border-radius: 5px;
  cursor: pointer;
  margin: 0.3rem;
  transition: all 0.3s;
  font-weight: 600;
  letter-spacing: 0.5px;
}
select {
  font-family: 'Poppins', sans-serif;
  font-size: 1rem;
  padding: 0.6rem 1rem;
  border-radius: 6px;
  border: 1px solid #ccc;
  background-color: var(--card-bg);
  color: var(--text-color);
  transition: all 0.3s ease;
  cursor: pointer;
}
select:focus {
  outline: none;
  border-color: var(--accent-color);
  box-shadow: 0 0 5px var(--accent-color);
}
button:hover {
  background: linear-gradient(45deg, #007BFF, #00c8ff);
  transform: translateY(-2px) scale(1.03);
}
button:active {
  transform: scale(0.95);
}
.payment-page {
  display: none;
  padding: 2rem;
  max-width: 500px;
  margin: 3rem auto;
  border: 1px solid #ccc;
  border-radius: 10px;
  background: var(--card-bg);
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.payment-options img[alt="DANA"] {
  width: auto;
  max-width: 90px;
  cursor: pointer;
  margin: 1rem;
  transition: transform 0.3s;
  object-fit: contain;
}
.payment-options img[alt="QRIS"] {
  width: auto;
  max-width: 70px;
  cursor: pointer;
  margin: 1rem;
  transition: transform 0.3s;
  object-fit: contain;
}
.payment-options img:hover {
  transform: scale(1.1);
}
.fade-in {
  animation: fadeInPopup 0.4s ease forwards;
  opacity: 0;
  transform: scale(0.9);
}

@keyframes fadeInPopup {
  to {
    opacity: 1;
    transform: scale(1);
  }
}
input[type="search"] {
  width: 100%;
  padding: 0.7rem;
  margin-top: 1rem;
  margin-bottom: 2rem;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 1rem;
}
.wa-fixed {
  position: fixed;
  left: 20px;
  top: 92%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  background: #25d366;
  color: white;
  padding: 0.3rem 0.7rem;
  border-radius: 20px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  z-index: 1000;
  cursor: pointer;
  text-decoration: none;
  font-weight: 500;
  font-size: 0.75rem;
}
.wa-fixed img {
  width: 18px;
  height: 18px;
  margin-right: 0.4rem;
  object-fit: contain;
}
body::before {
  content: "";
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: -1;
  background: radial-gradient(circle at center, rgba(255,255,255,0.05), transparent 70%);
}
.blob-container {
  position: fixed;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -1;
  top: 0;
  left: 0;
}
.blob {
  position: absolute;
  width: 300px;
  height: 300px;
  background: #00c8ff;
  opacity: 0.15;
  border-radius: 50%;
  filter: blur(80px);
  animation: moveBlobs 20s infinite alternate ease-in-out;
}
.blob:nth-child(2) {
  left: 60%;
  top: 30%;
  background: #007BFF;
  animation-delay: 5s;
}
@keyframes moveBlobs {
  0% {
    transform: translate(0, 0) scale(1);
  }
  100% {
    transform: translate(-100px, 100px) scale(1.2);
  }
}

#preview-popup {
  background: rgba(0, 0, 0, 0.7);
  display: none;
  position: fixed;
  inset: 0;
  justify-content: center;
  align-items: center;
  z-index: 99999;
}

#preview-popup .preview-box {
  background: var(--popup-bg);
  color: var(--text-color);
  padding: 1rem;
  border-radius: 10px;
  width: 90%; /* dari 100% */
  max-width: 320px; /* dari 400px */
  text-align: center;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  position: relative;
  transition: background 0.3s, color 0.3s;
}

.preview-img-container {
  position: relative;
  overflow: hidden;
  aspect-ratio: 1 / 1; /* ✅ Biar tidak terlalu tinggi */
  border-radius: 8px;
  margin-bottom: 1rem;
}

#preview-img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  transition: transform 0.3s ease;
  cursor: zoom-in;
}

#preview-img.zoomed {
  transform: scale(2);
  cursor: zoom-out;
}

.nav-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0, 0, 0, 0.6);
  border: none;
  padding: 0.4rem;
  border-radius: 50%;
  cursor: pointer;
  z-index: 2;
  transition: background 0.3s;
}

.nav-button img {
  width: 20px;
  height: 20px;
  filter: invert(1);
}

.nav-button:hover {
  background: rgba(0, 0, 0, 0.9);
}

.close-btn {
  background: red;
  color: white;
  border: none;
  padding: 0.5rem 1.2rem;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
  transition: background 0.3s;
}

.close-btn:hover {
  background: #b30000;
}
#popup-confirm, #popup-alert {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.5);
  align-items: center;
  justify-content: center;
  z-index: 9999;
  pointer-events: auto;
}
#popup-confirm .box, #popup-alert .box {
  background: var(--popup-bg);
  color: var(--text-color);
  transition: background-color 0.3s, color 0.3s;
  padding: 2rem;
  border-radius: 10px;
  max-width: 300px;
  width: 90%;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  animation: pop 0.3s ease;
}
.audio-player {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: var(--card-bg); /* Ikuti tema */
  border: 1px solid rgba(0,0,0,0.1);
  border-radius: 12px;
  padding: 0.8rem 1rem;
  margin: 1.5rem auto;
  max-width: 320px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  font-size: 0.95rem;
  color: var(--text-color);
  transition: background 0.3s, color 0.3s;
}
.audio-info {
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.audio-info svg {
  fill: #007BFF;
}
body.dark .audio-info svg {
  fill: #00c8ff;
}
.audio-toggle-btn {
  background: linear-gradient(135deg, #007BFF, #00c8ff);
  border: none;
  border-radius: 50%;
  width: 52px;
  height: 52px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 0.3s, transform 0.2s;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
}
.audio-toggle-btn:hover {
  transform: scale(1.1);
  background: linear-gradient(135deg, #00aaff, #007BFF);
}
.audio-toggle-btn svg {
  width: 28px;
  height: 28px;
  fill: white;
}
.btn {
  background: #007BFF;
  color: white;
  border: none;
  padding: 0.6rem 1.2rem;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.3s;
}
.btn:hover {
  background: #00b7ff;
}
.btn.cancel {
  background: #ccc;
  color: #333;
}
@keyframes fadeIn {
  from { background: rgba(0, 0, 0, 0); }
  to { background: rgba(0, 0, 0, 0.6); }
}
#toast {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: var(--accent-color);
  color: white;
  padding: 0.8rem 1.2rem;
  border-radius: 5px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.3s, transform 0.3s;
  z-index: 9999;
  font-size: 0.85rem;
  pointer-events: none;
}
#toast.show {
  opacity: 1;
  transform: translateY(0);
}
@keyframes pop {
  from { transform: scale(0.7); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}
</style>
</head>
<body>
<div class="blob-container">
  <div class="blob"></div>
  <div class="blob"></div>
</div>

<header>
  <div>
    <h1 style="margin: 0;">Dika ID</h1>
    <p style="margin: 0; font-size: 0.9rem; font-weight: 500;">Solusi Digital Cepat & Aman</p>
  </div>
  <div class="theme-toggle" onclick="toggleTheme()">🌙</div>
</header>

<a href="https://wa.me/6283841442290" target="_blank" class="wa-fixed" id="wa-chat" aria-label="Chat WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/WhatsApp_icon.png" alt="WhatsApp" />
  Chat Admin
</a>

<div class="container" id="main-page">
  <div id="lanjutkan-box" style="display:none; text-align:center; padding:1rem;">
  <p style="margin-bottom: 0.5rem;">Ada pesanan yang belum anda selesaikan!</p>
  <div style="display:flex; gap: 0.5rem; justify-content:center; flex-wrap:wrap;">
    <button onclick="lanjutkanPesanan()" style="background:#007BFF;">Lanjutkan</button>
    <button onclick="batalkanProgressPesanan()" style="background:#dc3545;">Batalkan</button>
  </div>
</div>
  
  <div class="profile">
  <div class="profile-header">
    <h2>Dika Pamungkas</h2>
    <p><strong>Pemrograman & Web Developer</strong></p>
  </div>

  <div class="profile-content">
    <img src="https://iili.io/Fub8VGp.jpg" alt="Profile">
    <div class="bio">
      <p>📍 Jawa Tengah, Indonesia</p>
      <p>📩 dikaapamungkas9821@gmail.com</p>
      <p>💡 Teknologi Informasi Komunikasi</p>
    </div>
  </div>
</div>

  <div class="audio-player">
  <div class="audio-info">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="#007BFF" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 3v10.55A4 4 0 1014 17V7h4V3h-6z"/>
    </svg>
    <span id="audio-title">everything u are - hindia</span>
  </div>
  <button id="audio-btn" onclick="toggleAudio()" class="audio-toggle-btn" aria-label="Toggle Audio">
    <svg id="audio-icon" width="20" height="20" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
      <path d="M8 5v14l11-7z"/>
    </svg>
  </button>
  <audio id="bg-audio" loop preload="auto">
    <source src="https://files.catbox.moe/fetvle.mp3" type="audio/mpeg">
  </audio>
  </div>

  <div class="section faq">
    <h2>FAQ - Informasi Edukatif</h2>
    <h3>Apa Itu Panel Pterodactyl?</h3>
    <p>Panel Pterodactyl adalah platform manajemen server berbasis web yang memudahkan pengguna dalam mengelola server untuk berbagai kebutuhan seperti game server, bot WhatsApp, aplikasi, dan lain-lain.</p>
    <h3>Apa itu VPS DigitalOcean?</h3>
    <p>VPS (Virtual Private Server) DigitalOcean adalah layanan server virtual yang dapat digunakan untuk menjalankan berbagai aplikasi seperti bot WhatsApp, website, panel Pterodactyl, dan lain-lain.</p>
    <h3>Apa itu Bot WhatsApp?</h3>
    <p>Bot WhatsApp adalah program otomatis yang digunakan untuk membalas pesan, menjalankan perintah, atau memberikan layanan tertentu di WhatsApp tanpa campur tangan manual.</p>
  </div>
  
  <div class="section products" id="product-list">

  <input type="search" placeholder="Cari produk..." id="search" oninput="delayedSearch()" style="width: 100%; padding: 0.7rem; border-radius: 5px; border: 1px solid #ccc; font-size: 1rem;">
  
  <select id="filter-kategori" onchange="filterByKategori()" style="margin-bottom: 2rem; padding: 0.5rem; font-size: 1rem; border-radius: 5px;">
  <option value="">🔍 Semua Kategori</option>
  <option value="public">Panel Server Public</option>
  <option value="private">Panel Server Private</option>
  <option value="vps">VPS Digital Ocean</option>
  <option value="bot">Pembuatan Bot Wa</option>
  <option value="script">Script Bot Wa</option>
</select>
  
    <h2>Panel Server Public</h2>
    <div class="product-list" id="list-public"></div>

    <h2>Panel Server Private</h2>
    <div class="product-list" id="list-private"></div>

    <h2>VPS Digital Ocean</h2>
    <div class="product-list" id="list-vps"></div>

    <h2>Pembuatan Bot Wa</h2>
    <div class="product-list" id="list-bot"></div>
    
    <h2>Script Bot Wa</h2>
    <div class="product-list" id="list-script"></div>

  </div>
</div>

<div id="preview-popup">
  <div class="preview-box">
    <div class="preview-img-container">
      <img id="preview-img" src="" alt="Preview Produk" onclick="toggleZoom(this, event)">
    </div>
    <div id="preview-dots" style="display: flex; justify-content: center; gap: 6px; margin-bottom: 1rem;"></div>
    <button class="close-btn" onclick="closePreview()">Tutup</button>
  </div>
</div>

<!-- HALAMAN PEMBAYARAN -->
<div class="payment-page" id="payment-page">
  <h2 id="item-kategori" style="margin: 0 0 0.3rem 0; color: var(--text-color); font-weight: 600;">-</h2>
<h2 id="item-title" style="margin: 0.3rem 0 1rem 0; color: var(--text-color); font-weight: 600;">-</h2>
  <h3 style="font-size:1.8rem; margin: 1.5rem 0; color:#00c8ff;">Rp<span id="total-price">0</span></h3>

  <p style="margin:1rem 0 0.5rem 0;">Pilih metode pembayaran:</p>
  
  <div class="payment-options" style="display:flex; justify-content:center; flex-wrap:wrap;">
    <img src="https://iili.io/FTuZHOJ.png" alt="DANA" onclick="selectPayment('DANA')">
    <img src="https://iili.io/FTuZ9Ra.png" alt="QRIS" onclick="selectPayment('QRIS')">
  </div>

  <div id="payment-info" style="margin-top:1rem;"></div>

  <button onclick="confirmCancel()" style="background:#20c997; color:white;">Kembali</button>
</div>

<div id="popup-alert">
  <div class="box">
    <h3>Perhatian!</h3>
    <p id="alert-message">Pesan muncul di sini.</p>
    <button style="background:#007BFF;" onclick="closeAlert()">Oke</button>
  </div>
</div>

<div id="popup-confirm">
  <div class="box">
    <h3>Konfirmasi Pembayaran</h3>
    <p>Apakah Anda yakin sudah melakukan pembayaran?</p>
    <div style="margin-top:1.5rem;">
      <button style="background:#28a745;" onclick="proceedWhatsApp()">Ya, Lanjut</button>
      <button style="background:red;" onclick="closePopup()">Batalkan</button>
    </div>
  </div>
</div>

<div id="popup-cancel" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:9999; align-items:center; justify-content:center;">
  <div class="box" style="background:var(--popup-bg); color:var(--text-color); padding:2rem; border-radius:10px; max-width:300px; width:90%; text-align:center; box-shadow:0 4px 12px rgba(0,0,0,0.3); animation:pop 0.3s ease;">
    <h3>Batalkan Pesanan?</h3>
    <p>Yakin ingin kembali dan batalkan pesanan ini?</p>
    <div style="margin-top:1.5rem;">
      <button style="background:#28a745;" onclick="proceedCancel()">Ya, Batalkan</button>
      <button style="background:red;" onclick="closeCancelPopup()">Tidak</button>
    </div>
  </div>
</div>

<div id="confirmation-page" class="payment-page" style="display:none;">
  <h2 style="color:green;">Terima kasih telah mengkonfirmasi pembayaran Anda!</h2>
  <p style="margin: 1rem 0 2rem;">Pembayaran Anda akan segera diproses.</p>
  <button onclick="returnToMain()">Kembali</button>
</div>

<div id="toast">Nomor berhasil disalin!</div>

<div id="popup-qris" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 99999; align-items: center; justify-content: center;">
  <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; text-align: center; max-width: 320px; width: 90%; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
    
    <h3 style="margin-bottom: 0.5rem;">Scan QRIS Pembayaran</h3>
    <p style="font-size: 0.9rem; color: var(--text-color); margin-bottom: 1rem;">Screenshot QRIS ini dan scan di aplikasi e-wallet Anda</p>

    <img src="https://iili.io/FTuP3ml.md.jpg" alt="QRIS" style="width: 100%; max-width: 250px; height: auto; border-radius: 8px; margin-bottom: 1rem;">

    <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
      <a href="https://iili.io/FTuP3ml.md.jpg" download>
        <button class="btn">Download QRIS</button>
      </a>
      <button class="btn" style="background:#28a745;" onclick="confirmPayment()">Selesai Bayar</button>
      <button class="btn cancel" style="background:red; color:white;" onclick="closeQrisPopup()">Batalkan</button>
    </div>
  </div>
</div>

<div id="popup-dana" style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.6); z-index: 99999; align-items: center; justify-content: center;">
  <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; text-align: center; max-width: 320px; width: 90%; position: relative; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
    
    <h3 style="margin-bottom: 0.5rem;">Pembayaran DANA</h3>
    <p style="font-size: 0.9rem; color: var(--text-color); margin-bottom: 1rem;">Silakan transfer ke nomor berikut:</p>

    <p id="nomor-dana" style="font-size: 1.2rem; font-weight: bold; margin: 0;">081227434223</p>
    <p style="margin: 0.3rem 0 1rem; font-size: 0.95rem; color: gray;">a.n. DikaStudent</p>

    <div style="display: flex; gap: 0.5rem; justify-content: center; flex-wrap: wrap;">
      <button class="btn" onclick="copyRekening()">Copy Rekening</button>
      <button class="btn" style="background:#28a745;" onclick="confirmPayment()">Selesai Bayar</button>
      <button class="btn cancel" style="background:red; color:white;" onclick="closeDanaPopup()">Batalkan</button>
    </div>
  </div>
</div>

<script>
const produkList = [
  { kategori: 'public', nama: 'PANEL RAM 1GB CPU 30%', harga: 1000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'PANEL RAM 2GB CPU 60%', harga: 2000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'PANEL RAM 3GB CPU 90%', harga: 3000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'PANEL RAM 4GB CPU 110%', harga: 4000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'PANEL RAM 5GB CPU 130%', harga: 5000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'PANEL UNLIMITED RAM&CPU', harga: 7000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'public', nama: 'RESELLER PANEL', harga: 10000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/vasfu0.jpg"] },
  { kategori: 'public', nama: 'OWNER RESELLER PANEL', harga: 15000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/vasfu0.jpg"] },
  { kategori: 'public', nama: 'ADMIN PANEL', harga: 20000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/l2hp1q.jpg"] },
  { kategori: 'public', nama: 'PARTNER PANEL', harga: 25000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/l2hp1q.jpg"] },

  { kategori: 'private', nama: 'PANEL RAM 1GB CPU 30%', harga: 2000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'PANEL RAM 2GB CPU 60%', harga: 3000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'PANEL RAM 3GB CPU 90%', harga: 4000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'PANEL RAM 4GB CPU 110%', harga: 5000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'PANEL RAM 5GB CPU 130%', harga: 6000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'PANEL UNLIMITED RAM&CPU', harga: 10000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/y1bqkj.jpg"] },
  { kategori: 'private', nama: 'RESELLER PANEL', harga: 15000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/vasfu0.jpg"] },
  { kategori: 'private', nama: 'OWNER RESELLER PANEL', harga: 20000, img: ["https://files.catbox.moe/sxxeyt.jpg","https://files.catbox.moe/vasfu0.jpg"] },

  { kategori: 'vps', nama: 'VPS RAM 2GB CORE 2', harga: 25000, img: ['https://files.catbox.moe/zuq7o2.jpg'] },
  { kategori: 'vps', nama: 'VPS RAM 4GB CORE 2', harga: 30000, img: ['https://files.catbox.moe/zuq7o2.jpg'] },
  { kategori: 'vps', nama: 'VPS RAM 8GB CORE 4', harga: 40000, img: ['https://files.catbox.moe/zuq7o2.jpg'] },
  { kategori: 'vps', nama: 'VPS RAM 16GB CORE 4', harga: 50000, img: ['https://files.catbox.moe/zuq7o2.jpg'] },

  { kategori: 'bot', nama: 'BOT MASA AKTIF 1BULAN', harga: 10000, img: ['https://files.catbox.moe/abit7j.jpg'] },
  { kategori: 'bot', nama: 'BOT MASA AKTIF 2BULAN', harga: 15000, img: ['https://files.catbox.moe/abit7j.jpg'] },
  { kategori: 'bot', nama: 'BOT MASA AKTIF PERMANEN', harga: 25000, img: ['https://files.catbox.moe/abit7j.jpg'] },
  
  { kategori: 'script', nama: 'BRUTALITY V8 GEN 2 [NO ADMIN DB]', harga: 15000, img: ['https://files.catbox.moe/jvt7s3.jpg','https://files.catbox.moe/29n4c2.jpg'] },
  { kategori: 'script', nama: 'BRUTALITY V8 GEN 2 [ADMIN DB]', harga: 30000, img: ['https://files.catbox.moe/jvt7s3.jpg','https://files.catbox.moe/29n4c2.jpg'] }
];

const kategoriMap = {
  public: 'SERVER PUBLIC',
  private: 'SERVER PRIVATE',
  vps: 'DIGITAL OCEAN',
  bot: 'BOT WA',
  script: 'SCRIPT BOT WA'
};

let selectedProduct = '';
let selectedPrice = 0;
let selectedPayment = '';
let selectedKategori = '';
let darkMode = false;
let touchStartX = 0;
let touchEndX = 0;
let isDragging = false;
let isZoomed = false;
let currentTranslate = 0;
let previewImages = [];
let currentImageIndex = 0;
let startX = 0;
let currentX = 0;
let diffX = 0;
let isTouching = false;
let dragStartX = 0;
let dragStartY = 0;
let offsetX = 0;
let offsetY = 0;
let lastOffsetX = 0;
let lastOffsetY = 0;

const previewImg = document.getElementById('preview-img');

const altIconMap = {
  public: 'Pterodactyl',
  private: 'Pterodactyl',
  vps: 'Digital Ocean',
  bot: 'Bot WhatsApp', 
  script: 'Script'
};

const iconMap = {
  public: 'https://iili.io/FTuUKvV.md.png', 
  private: 'https://iili.io/FTuUKvV.md.png',
  vps: 'https://iili.io/FTuUFYQ.png',
  bot: 'https://iili.io/FT0en4t.png',
  script: 'https://iili.io/FERliHx.md.png'
};

function formatCurrency(amount) {
  amount = Number(amount) || 0;
  return amount.toLocaleString('id-ID');
}

function renderProduk() {
  const containerMap = {
    public: document.getElementById('list-public'),
    private: document.getElementById('list-private'),
    vps: document.getElementById('list-vps'),
    bot: document.getElementById('list-bot'), 
    script: document.getElementById('list-script')
  };

  // Kosongkan semua kontainer
  Object.values(containerMap).forEach(container => {
    container.innerHTML = '';
  });

  // Ambil data produk yang sering dilihat
  const views = JSON.parse(localStorage.getItem('productViews')) || {};
  let maxViews = 0;
  let topProduct = '';

  for (const [product, count] of Object.entries(views)) {
    if (count > maxViews) {
      maxViews = count;
      topProduct = product;
    }
  }

  produkList.forEach(p => {
    const el = document.createElement('div');
    el.className = 'product';

    // Gambar produk (logo kecil)
    const img = document.createElement('img');
    img.src = iconMap[p.kategori]; // ✅ gunakan logo sesuai kategori
    img.alt = altIconMap[p.kategori] || 'Icon';
    img.loading = 'lazy';
    el.appendChild(img);

    // Judul
    const title = document.createElement('h3');
    title.textContent = p.nama;
    el.appendChild(title);

    // Harga
    const priceP = document.createElement('p');
    priceP.className = 'price';
    const strong = document.createElement('strong');
    strong.style.color = '#28a745';
    strong.innerHTML = `Rp<span>${formatCurrency(p.harga)}</span>`;
    priceP.appendChild(strong);
    el.appendChild(priceP);

    // Tombol Beli
    const button = document.createElement('button');
    button.textContent = 'Beli';
    button.setAttribute('data-title', p.nama);
    button.onclick = () => selectProduct(p.nama, p.harga, p.kategori);
    el.appendChild(button);

    // Tombol Preview
    const previewBtn = document.createElement('button');
    previewBtn.textContent = 'Preview';
    previewBtn.style.background = '#6c757d';
    previewBtn.onclick = () => openPreview(p.img); // ✅ hanya pakai p.img
    el.appendChild(previewBtn);

    // Tombol Bagikan
    const shareBtn = document.createElement('button');
    shareBtn.innerHTML = '🔗 Bagikan';
    shareBtn.style.background = '#17a2b8';
    shareBtn.onclick = () => shareProduct(p.nama);
    el.appendChild(shareBtn);


    // Label "Sering Dilihat"
    if (p.nama === topProduct && maxViews > 0) {
      const label = document.createElement('span');
      label.className = 'label-sering';
      label.textContent = 'Sering Dilihat';
      el.appendChild(label);
    }

    // Masukkan ke dalam kategori
    const targetContainer = containerMap[p.kategori];
    if (targetContainer) {
      targetContainer.appendChild(el);
    }
  });
}

function toggleTheme() {
  darkMode = !darkMode;
  document.documentElement.style.setProperty('--bg-color', darkMode ? '#121212' : '#fff');
  document.documentElement.style.setProperty('--text-color', darkMode ? '#fff' : '#000');
  document.documentElement.style.setProperty('--card-bg', darkMode ? '#1e1e1e' : '#f9f9f9');
  document.documentElement.style.setProperty('--popup-bg', darkMode ? '#1e1e1e' : '#fff');
  document.body.classList.toggle('dark', darkMode);
  const search = document.getElementById('search');
  const filter = document.getElementById('filter-kategori');

  if (search) {
    search.style.backgroundColor = darkMode ? '#1e1e1e' : '#fff';
    search.style.color = darkMode ? '#fff' : '#000';
    search.style.border = darkMode ? '1px solid #444' : '1px solid #ccc';
  }

  if (filter) {
    filter.style.backgroundColor = darkMode ? '#1e1e1e' : '#fff';
    filter.style.color = darkMode ? '#fff' : '#000';
    filter.style.border = darkMode ? '1px solid #444' : '1px solid #ccc';
  }

  const toggleBtn = document.querySelector('.theme-toggle');
  if (toggleBtn) {
    toggleBtn.innerText = darkMode ? '☀️' : '🌙';
  }

  localStorage.setItem('darkMode', darkMode ? 'enabled' : 'disabled');
}

function applyTheme() {
  document.documentElement.style.setProperty('--bg-color', darkMode ? '#121212' : '#fff');
  document.documentElement.style.setProperty('--text-color', darkMode ? '#fff' : '#000');
  document.documentElement.style.setProperty('--card-bg', darkMode ? '#1e1e1e' : '#f9f9f9');
  document.documentElement.style.setProperty('--popup-bg', darkMode ? '#1e1e1e' : '#fff');
  document.getElementById('search').style.backgroundColor = darkMode ? '#1e1e1e' : '#fff';
  document.getElementById('search').style.color = darkMode ? '#fff' : '#000';
  document.getElementById('search').style.border = darkMode ? '1px solid #444' : '1px solid #ccc';
  document.getElementById('filter-kategori').style.backgroundColor = darkMode ? '#1e1e1e' : '#fff';
  document.getElementById('filter-kategori').style.color = darkMode ? '#fff' : '#000';
  document.getElementById('filter-kategori').style.border = darkMode ? '1px solid #444' : '1px solid #ccc';
  
  document.querySelector('.theme-toggle').innerText = darkMode ? '☀️' : '🌙';
}

function toggleAudio() {
  const audio = document.getElementById('bg-audio');
  const icon = document.getElementById('audio-icon');

  if (audio.paused) {
    audio.play();
    icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>'; // pause icon
    localStorage.setItem('audioStatus', 'on');
  } else {
    audio.pause();
    icon.innerHTML = '<path d="M8 5v14l11-7z"/>'; // play icon
    localStorage.setItem('audioStatus', 'off');
  }
}

function selectProduct(product, price, kategori = '') {
  selectedProduct = product;
  selectedPrice = price;
  selectedKategori = kategori;

  const kategoriTampil = kategoriMap[kategori] || kategori;

  const views = JSON.parse(localStorage.getItem('productViews')) || {};
  views[product] = (views[product] || 0) + 1;
  localStorage.setItem('productViews', JSON.stringify(views));

  document.getElementById('item-kategori').innerText = kategoriTampil;
  document.getElementById('item-title').innerText = product;
  document.getElementById('total-price').innerText = formatCurrency(price);

  document.getElementById('main-page').style.display = 'none';
  document.getElementById('payment-page').style.display = 'block';

  updateSeringDilihatLabel();
  
  localStorage.setItem('progressPesanan', JSON.stringify({
  produk: selectedProduct,
  harga: selectedPrice,
  kategori: selectedKategori
}));
}

function batalkanProgressPesanan() {
  localStorage.removeItem('progressPesanan');
  document.getElementById('lanjutkan-box').style.display = 'none';
  showToast('Pesanan dibatalkan.');
}

function updateSeringDilihatLabel() {
  renderProduk(); // render ulang dan perbarui label berdasarkan data views
}

function openPreview(images) {
  if (!Array.isArray(images) || images.length === 0) return;

  previewImages = images;
  currentImageIndex = 0;

  updatePreviewImage();
  document.getElementById('preview-popup').style.display = 'flex';
}

function updatePreviewImage() {
  const img = document.getElementById('preview-img');
  img.src = previewImages[currentImageIndex];
  renderPreviewDots(); // Tambahkan ini
}

previewImg.addEventListener('touchstart', (e) => {
  if (!isZoomed || e.touches.length !== 1) return;
  isTouching = true;
  dragStartX = e.touches[0].clientX;
  dragStartY = e.touches[0].clientY;
}, { passive: false });

previewImg.addEventListener('touchmove', (e) => {
  if (!isTouching || !isZoomed) return;
  e.preventDefault();

  const moveX = e.touches[0].clientX - dragStartX;
  const moveY = e.touches[0].clientY - dragStartY;

  offsetX = lastOffsetX + moveX;
  offsetY = lastOffsetY + moveY;

  previewImg.style.transform = `scale(2.2) translate(${offsetX}px, ${offsetY}px)`;
}, { passive: false });

previewImg.addEventListener('touchend', () => {
  isTouching = false;
  lastOffsetX = offsetX;
  lastOffsetY = offsetY;
});

function toggleZoom(img, event) {
  if (event && event.target.closest('.nav-button')) return;

  isZoomed = !isZoomed;

  if (isZoomed) {
    img.classList.add('zoomed');
    offsetX = 0;
    offsetY = 0;
    lastOffsetX = 0;
    lastOffsetY = 0;
    previewImg.style.transform = `scale(2.2) translate(0px, 0px)`;
    img.style.cursor = 'grab';
  } else {
    img.classList.remove('zoomed');
    offsetX = 0;
    offsetY = 0;
    lastOffsetX = 0;
    lastOffsetY = 0;
    previewImg.style.transform = `scale(1) translate(0px, 0px)`;
    img.style.cursor = 'zoom-in';
  }
}

function renderPreviewDots() {
  const dotsContainer = document.getElementById('preview-dots');
  dotsContainer.innerHTML = '';

  previewImages.forEach((_, index) => {
    const dot = document.createElement('div');
    dot.style.width = '10px';
    dot.style.height = '10px';
    dot.style.borderRadius = '50%';
    dot.style.background = index === currentImageIndex ? '#007BFF' : '#bbb';
    dot.style.cursor = 'pointer';
    dot.style.transition = 'background 0.3s';
    
    dot.onclick = () => {
      currentImageIndex = index;
      updatePreviewImage();
      renderPreviewDots();
    };

    dotsContainer.appendChild(dot);
  });
}

function handleSwipe() {
  const threshold = 50; // minimum jarak swipe
  const diff = touchStartX - touchEndX;

  if (Math.abs(diff) > threshold) {
    if (diff > 0) {
      nextImage();
    } else {
      prevImage();
    }
  }
}

function nextImage() {
  if (previewImages.length === 0) return;
  currentImageIndex = (currentImageIndex + 1) % previewImages.length;
  updatePreviewImage();
}

function prevImage() {
  if (previewImages.length === 0) return;
  currentImageIndex = (currentImageIndex - 1 + previewImages.length) % previewImages.length;
  updatePreviewImage();
}

function closePreview() {
  document.getElementById('preview-popup').style.display = 'none';
  isZoomed = false;
  previewImg.classList.remove('zoomed');
  previewImg.style.transform = 'scale(1) translate(0, 0)';
  previewImg.style.cursor = 'zoom-in';
  offsetX = 0;
  offsetY = 0;
  lastOffsetX = 0;
  lastOffsetY = 0;
}

function filterByKategori() {
  doSearch();
}

function selectPayment(method) {
  selectedPayment = method;
  const data = JSON.parse(localStorage.getItem('progressPesanan')) || {};
  data.metode = method;
  localStorage.setItem('progressPesanan', JSON.stringify(data));
  let info = '';
  if (method === 'DANA') {
    const danaPopup = document.getElementById('popup-dana');
    danaPopup.style.display = 'flex';
    danaPopup.querySelector('div').classList.add('fade-in');
  } else if (method === 'QRIS') {
    const qrisPopup = document.getElementById('popup-qris');
    qrisPopup.style.display = 'flex';
    qrisPopup.querySelector('div').classList.add('fade-in');
  }
  document.getElementById('payment-info').innerHTML = info;
}

function copyRekening() {
  const rekening = document.getElementById('nomor-dana').innerText;

  if (navigator.clipboard) {
    navigator.clipboard.writeText(rekening)
      .then(() => showToast('Nomor rekening berhasil disalin!'))
      .catch(() => showToast('Gagal menyalin, coba manual.'));
  } else {
    try {
      const tempInput = document.createElement('input');
      tempInput.value = rekening;
      document.body.appendChild(tempInput);
      tempInput.select();
      const copied = document.execCommand('copy');
      document.body.removeChild(tempInput);
      if (copied) {
        showToast('Nomor rekening berhasil disalin!');
      } else {
        showToast('Gagal menyalin, coba manual.');
      }
    } catch (e) {
      showToast('Gagal menyalin, coba manual.');
    }
  }
}

function lanjutkanPesanan() {
  const data = JSON.parse(localStorage.getItem('progressPesanan'));
  if (!data) return;

  selectedProduct = data.produk;
  selectedPrice = data.harga;
  selectedKategori = data.kategori;
  selectedPayment = data.metode || '';

  document.getElementById('item-kategori').innerText = kategoriMap[selectedKategori] || selectedKategori;
  document.getElementById('item-title').innerText = selectedProduct;
  document.getElementById('total-price').innerText = formatCurrency(selectedPrice);

  document.getElementById('main-page').style.display = 'none';
  document.getElementById('payment-page').style.display = 'block';

  updateSeringDilihatLabel();
}

function showToast(message) {
  const toast = document.getElementById('toast');
  toast.innerText = message;
  toast.classList.add('show');
  
  setTimeout(() => {
    toast.classList.remove('show');
  }, 2500);
}

function confirmCancel() {
  document.getElementById('popup-cancel').style.display = 'flex';
}

function closeCancelPopup() {
  document.getElementById('popup-cancel').style.display = 'none';
}

function proceedCancel() {
  closeCancelPopup();
  localStorage.removeItem('progressPesanan');
  goBack();

  document.getElementById('lanjutkan-box').style.display = 'none';
}

function confirmPayment() {
  closeDanaPopup();
  closeQrisPopup();

  document.getElementById('popup-confirm').style.display = 'flex';
}

function proceedWhatsApp() {
  if (!selectedProduct || !selectedPayment) {
    showAlert('Lengkapi pesanan sebelum konfirmasi!');
    return;
  }

  closePopup();

  const kategoriTampil = kategoriMap[selectedKategori] || selectedKategori;

  const message = `Halo Admin, Saya telah melakukan pembayaran untuk pesanan berikut:

Produk: ${selectedProduct}
Kategori: ${kategoriTampil}
Harga: Rp${formatCurrency(selectedPrice)}
Payment: ${selectedPayment}

Mohon konfirmasinya, terima kasih`;

  navigator.clipboard.writeText(message);

  document.getElementById('main-page').style.display = 'none';
  document.getElementById('payment-page').style.display = 'none';
  document.getElementById('confirmation-page').style.display = 'block';

  setTimeout(() => {
    window.location.href = `https://wa.me/6283841442290?text=${encodeURIComponent(message)}`;
  }, 100);
  
  localStorage.removeItem('progressPesanan');
}

window.addEventListener('DOMContentLoaded', () => {
  // ======= DARK MODE SETTING =======
  const savedTheme = localStorage.getItem('darkMode');
  if (savedTheme) {
    darkMode = savedTheme === 'enabled';
  }
  applyTheme();

  // ======= RENDER DATA =======
  renderProduk();
  updateSeringDilihatLabel();

  // ======= HALAMAN KONFIRMASI =========
  const confirmed = localStorage.getItem('hasConfirmed');
  if (confirmed === 'true') {
    document.getElementById('main-page').style.display = 'none';
    document.getElementById('payment-page').style.display = 'none';
    document.getElementById('confirmation-page').style.display = 'block';
    localStorage.removeItem('hasConfirmed');
  }

  // ======= LANJUTKAN PESANAN =======
  const last = JSON.parse(localStorage.getItem('progressPesanan') || 'null');
  if (
    last &&
    typeof last === 'object' &&
    last.produk &&
    last.kategori &&
    last.produk !== '' &&
    last.kategori !== ''
  ) {
    document.getElementById('lanjutkan-box').style.display = 'block';
  } else {
    document.getElementById('lanjutkan-box').style.display = 'none';
  }

  // ======= AUDIO ICON & AUTOPLAY FIX =======
  const audio = document.getElementById('bg-audio');
  const icon = document.getElementById('audio-icon');
  const status = localStorage.getItem('audioStatus');

  if (status === 'on') {
    audio.play().then(() => {
      icon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
    }).catch(() => {
      icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
      localStorage.setItem('audioStatus', 'off');
    });
  } else {
    icon.innerHTML = '<path d="M8 5v14l11-7z"/>';
  }
});

function returnToMain() {
  document.getElementById('confirmation-page').style.display = 'none';
  document.getElementById('main-page').style.display = 'block';
  
  setTimeout(updateSeringDilihatLabel, 50);
}

function closeDanaPopup() {
  const danaPopup = document.getElementById('popup-dana');
  danaPopup.querySelector('div').classList.remove('fade-in');
  danaPopup.style.display = 'none';
}

function closeQrisPopup() {
  const qrisPopup = document.getElementById('popup-qris');
  qrisPopup.querySelector('div').classList.remove('fade-in');
  qrisPopup.style.display = 'none';
}

function closePopup() {
  document.getElementById('popup-confirm').style.display = 'none';
}

function goBack() {
  document.getElementById('payment-page').style.display = 'none';
  document.getElementById('main-page').style.display = 'block';
  
  setTimeout(updateSeringDilihatLabel, 50);
}

function showAlert(message) {
  document.getElementById('alert-message').innerText = message;
  document.getElementById('popup-alert').style.display = 'flex';
}

function closeAlert() {
  document.getElementById('popup-alert').style.display = 'none';
}

let searchTimeout;

function delayedSearch() {
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(() => {
    doSearch();
  }, 500);
}

function doSearch() {
  const rawKeyword = document.getElementById('search').value;
  const keyword = rawKeyword.replace(/[<>]/g, '').toLowerCase().trim();
  const kategoriFilter = document.getElementById('filter-kategori').value;

  const products = document.querySelectorAll('.product');
  let found = 0;

  products.forEach(p => {
    const title = p.querySelector('h3')?.innerText.toLowerCase() || '';
    const category = p.querySelector('img')?.alt.toLowerCase() || '';
    const matchSearch = title.includes(keyword) || category.includes(keyword);

    const parentId = p.parentElement?.id || '';
    const matchKategori =
      !kategoriFilter ||
      (kategoriFilter === 'public' && parentId === 'list-public') ||
      (kategoriFilter === 'private' && parentId === 'list-private') ||
      (kategoriFilter === 'vps' && parentId === 'list-vps') ||
      (kategoriFilter === 'bot' && parentId === 'list-bot') ||
      (kategoriFilter === 'script' && parentId === 'list-script');

    const tampilkan = matchSearch && matchKategori;

    p.style.display = tampilkan ? 'block' : 'none';
    if (tampilkan) found++;
  });

  if (keyword && found === 0) {
    showAlert('Produk tidak ditemukan');
  }
}

function shareProduct(nama) {
  const url = window.location.href.split('#')[0];
  const shareUrl = `${url}?produk=${encodeURIComponent(nama)}`;
  const text = `Cek produk ini di Dika ID: ${nama}\n${shareUrl}`;

  if (navigator.share) {
    navigator.share({
      title: 'Dika ID',
      text: nama,
      url: shareUrl
    }).catch((err) => {
      showToast('Gagal membagikan: ' + err.message);
    });
  } else {
    navigator.clipboard.writeText(text).then(() => {
      showToast('Link produk berhasil disalin!');
    }).catch(() => {
      alert('Gagal menyalin link. Coba secara manual.');
    });
  }
}

</script>

</body>
</html>

<!-- dika -->
